<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <meta charset="utf-8">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>
    <h1>Hydration Tracker</h1>

    <div class="card">
        <header>
            <h2>1000 / 2000 ml</h2>
        </header>
        <div class="container">
            <div class="progress-bar"></div>
        </div>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Import access to firebase database
        import { getDatabase, ref, onValue, get } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyDqANY2yNSccSWyzMMIVDFtReOhzCJafPs",
            authDomain: "hydration-tracker-1fc44.firebaseapp.com",
            databaseURL: "https://hydration-tracker-1fc44-default-rtdb.firebaseio.com",
            projectId: "hydration-tracker-1fc44",
            storageBucket: "hydration-tracker-1fc44.firebasestorage.app",
            messagingSenderId: "630926339030",
            appId: "1:630926339030:web:a535a03e4c674d482dd277",
            measurementId: "G-N1WZ9JVZML"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        // Connect to database
        const database = getDatabase(app);

        // Read all data from root
        const rootRef = ref(database, '/');

        onValue(rootRef, (snapshot) => {
            const data = snapshot.val();

            // Store data in variables
            const timeLastConsumed = data['Time Last Consumed'];
            const waterConsumed = data['Water Consumed'];
            const waterRemaining = data['Water Remaining'];

            // Display in HTML
            document.getElementById('data-container').innerHTML = `
            <h1>Hydration Tracker</h1>
            <p><strong>Time Last Consumed:</strong> ${timeLastConsumed || 'No data'}</p>
            <p><strong>Water Consumed:</strong> ${waterConsumed || 0} ml</p>
            <p><strong>Water Remaining:</strong> ${waterRemaining || 0} ml</p>
        `;

            // Now you can use these variables anywhere in your code
            console.log('Time:', timeLastConsumed);
            console.log('Consumed:', waterConsumed);
            console.log('Remaining:', waterRemaining);
        });
    </script>

    <div style="position: relative; height:40vh; width:50vw">
        <canvas id="myChart"></canvas>
    </div>

    <script src="script.js"></script>


</body>

</html>